{% extends 'base.html.twig' %}

{% block title %}Localisation | CEC{% endblock %}

{% block h1 %}Localisation{% endblock %}

{% block history %}
    <li class="breadcrumb-item"><a href="{{ path('home') }}">Accueil</a></li>
    <li class="breadcrumb-item active">Localisation</li>
{% endblock %}

{% block body %}
<div class="card">
    <div class="card-body">
        {{ form_start(milieu_form) }}

        {{ form_widget(milieu_form) }}

        <button type="submit" class="btn btn-success">Ajout</button>

        {{ form_end(milieu_form) }}
    </div>
</div>

<h2>Listes</h2>

<div class="row fit card">
    <table class="table table-fit table-cec table-hover">
        <tr>
            <th>Nom</th>
            <th>Description</th>
            {% if is_granted('ROLE_ADMIN') %}
                <th></th>
                <th></th>
            {% endif %}
        </tr>
        {% for milieu in milieus %}
        <tr>
            <td>{{ milieu.nom }}</td>
            <td>{{ milieu.description }}</td>
            {% if is_granted('ROLE_ADMIN') %}
                <td>
                    <a class="btn btn-default" title="Modifier" 
                            href="{{ path('update_milieu', {'id': milieu.id}) }}">
                        <i class="fas fa-edit"></i>
                    </a>
                </td>
                <td>
                    <a href="#" class="btn btn-danger" title="Supprimer" 
                            data-toggle="modal" data-target="#delete-modal"
                            onclick="del('{{ path('delete_milieu', {'id': milieu.id}) }}')">
                        <i class="fas fa-trash"></i>
                    </a>
                </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}