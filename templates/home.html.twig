{% extends 'base.html.twig' %}

{% block title %}Accueil | CEC{% endblock %}

{% block body %}

    <!-- General stat -->
    <div class="row">
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-success">
                <div class="inner">
                    <h3>{{ agriculteurs }}</h3>
                    <p>Agriculteurs</p>
                </div>
                <div class="icon">
                    <i class="ion ion-person-add"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-info">
                <div class="inner">
                    <h3>{{ hommes }}</h3>
                    <p>Homme agriculteurs</p>
                </div>
                <div class="icon">
                    <i class="ion ion-male"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-danger">
                <div class="inner">
                    <h3>{{ femmes }}<sup style="font-size: 20px"></sup></h3>
                    <p>Femme agriculteurs</p>
                </div>
                <div class="icon">
                    <i class="ion ion-female"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-warning">
                <div class="inner">
                    <h3>{{ parcelles }}</h3>
                    <p>Parcelles</p>
                </div>
                <div class="icon">
                    <i class="ion ion-pie-graph"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
    </div>
    <!-- /.row -->
    <!-- Main row -->
    <div class="row">
        <!-- Left col -->
        <section class="col-lg-7 connectedSortable">
            <!-- SCA Card-->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        Score de Consommation Alimentaire
                    </h3>
                </div><!-- /.card-header -->
                <div class="card-body">
                    <div class="tab-content p-0">
                    <!-- SCA content -->
                        <div class="tab-pane active" style="position: relative; height: 100px;">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="info-box bg-gradient-success">
                                        {# <span class="info-box-icon"><i class="fas fa-hotdog"></i></span> #}
                                        
                                        <div class="info-box-content">
                                            <span class="info-box-text">Acceptable (SCA > 42)</span>
                                            <span class="info-box-number">{{sca['acceptable']}}</span>
                                            
                                            <div class="progress">
                                            <div class="progress-bar" style="width: {{ sca['acceptable']*100/sca['total'] }}%"></div>
                                            </div>
                                            <span class="progress-description">
                                                {{ (sca['acceptable']*100/sca['total'])|round(1) }}% des agriculteurs
                                            </span>
                                        </div>
                                        <!-- /.info-box-content -->
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="info-box bg-gradient-warning">
                                        {# <span class="info-box-icon"><i class="fas fa-apple-alt"></i></span> #}

                                        <div class="info-box-content">
                                            <span class="info-box-text">Limite (SCA entre 28 et 42 )</span>
                                            <span class="info-box-number">{{sca['limite']}}</span>

                                            <div class="progress">
                                            <div class="progress-bar" style="width: {{ sca['limite']*100/sca['total'] }}%"></div>
                                            </div>
                                            <span class="progress-description">
                                                {{ (sca['limite']*100/sca['total'])|round(1) }}% des agriculteurs
                                            </span>
                                        </div>
                                        <!-- /.info-box-content -->
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="info-box bg-gradient-danger">
                                        {# <span class="info-box-icon"><i class="fas fa-drumstick-bite"></i></span> #}

                                        <div class="info-box-content">
                                            <span class="info-box-text">Pauvre (SCA < 28)</span>
                                            <span class="info-box-number">{{sca['pauvre']}}</span>

                                            <div class="progress">
                                            <div class="progress-bar" style="width: {{ sca['pauvre']*100/sca['total'] }}%"></div>
                                            </div>
                                            <span class="progress-description">
                                            {{ (sca['pauvre']*100/sca['total'])|round(1) }}% des agriculteurs
                                            </span>
                                        </div>
                                        <!-- /.info-box-content -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- /.card-body -->
            </div>
            <!-- /.card -->
            
            <div class="info-box">
                <span class="info-box-icon bg-brown"><i class="fas fa-tree"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Reboisement</span>
                    <span class="info-box-number">{{ reboisement }}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->

            <div class="info-box">
                <span class="info-box-icon bg-info"><i class="fas fa-glass-whiskey"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Nbr agriculteur ayant accès à l'eau potable</span>
                    <span class="info-box-number">{{ accesEauPotable }}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->


        </section>
        <!-- /.Left col -->
        <!-- right col (We are only adding the ID to make the widgets sortable)-->
        <section class="col-lg-5 connectedSortable">

            <!-- Map card -->
            <div class="card bg-gradient-primary">
            <div class="card-header border-0">
                <h3 class="card-title">
                <i class="fas fa-map-marker-alt mr-1"></i>
                Visitors
                </h3>
                <!-- card tools -->
                <div class="card-tools">
                <button type="button"
                        class="btn btn-primary btn-sm daterange"
                        data-toggle="tooltip"
                        title="Date range">
                    <i class="far fa-calendar-alt"></i>
                </button>
                <button type="button"
                        class="btn btn-primary btn-sm"
                        data-card-widget="collapse"
                        data-toggle="tooltip"
                        title="Collapse">
                    <i class="fas fa-minus"></i>
                </button>
                </div>
                <!-- /.card-tools -->
            </div>
            <div class="card-body">
                <div id="world-map" style="height: 250px; width: 100%;"></div>
            </div>
            <!-- /.card-body-->
            <div class="card-footer bg-transparent">
                <div class="row">
                <div class="col-4 text-center">
                    <div id="sparkline-1"></div>
                    <div class="text-white">Visitors</div>
                </div>
                <!-- ./col -->
                <div class="col-4 text-center">
                    <div id="sparkline-2"></div>
                    <div class="text-white">Online</div>
                </div>
                <!-- ./col -->
                <div class="col-4 text-center">
                    <div id="sparkline-3"></div>
                    <div class="text-white">Sales</div>
                </div>
                <!-- ./col -->
                </div>
                <!-- /.row -->
            </div>
            </div>
            <!-- /.card -->

        </section>
        <!-- right col -->
    </div>
    <!-- /.row (main row) -->
    
    <!-- Stat -->
    <div class="row">

        <section class="col-md-6">
            <h4>Accès à l'éducation</h4>

            <!-- Education -->
            <div class="card card-success">
                <div class="card-header">
                    <h3 class="card-title">Education</h3>

                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                        <canvas id="education" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                </div>
                <!-- /.card-body -->
                <!-- /.card -->
            </div>

        </section>

        <section class="col-md-6">
            <h4>Système de santé</h4>

            <!-- Santé -->
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">Système de santé</h3>

                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                        <canvas id="sante" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                </div>
                <!-- /.card-body -->
                <!-- /.card -->
            </div>

        </section>

        <div class="col-sm-12">
            <h4>Condition d'hygiene</h4>
        </div>
        
        <!-- Toilette -->
        <div class="col-lg-4">
            <div class="card card-warning">
                <div class="card-header">
                    <h3 class="card-title">Toilettes</h3>

                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                        <canvas id="toilette" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card -->
        </div>

        <!-- Douche -->
        <div class="col-lg-4">
            <div class="card card-warning">
                <div class="card-header">
                    <h3 class="card-title">Douche</h3>

                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                        <canvas id="douche" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card -->
        </div>

        <!-- Assainissement -->
        <div class="col-lg-4">
            <div class="card card-warning">
                <div class="card-header">
                    <h3 class="card-title">Autre assainissement</h3>

                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                        <canvas id="assainissement" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card -->
        </div>

    </div>
    <!-- /.row (stat) -->

{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/plugins/chart.js/Chart.min.js') }}"></script>

    <script>
        $(function () {

            //---------------------
            //- Toilette -
            //---------------------
            var toilette = {
                labels  : ['Haut', 'Moyen', 'Bas', 'Aucun'],
                datasets: [
                    {
                        label               : 'Toilettes',
                        backgroundColor     : 'rgba(60,141,188,0.9)',
                        borderColor         : 'rgba(60,141,188,0.8)',
                        pointRadius         : false,
                        pointColor          : '#3b8bba',
                        pointStrokeColor    : 'rgba(60,141,188,1)',
                        pointHighlightFill  : '#fff',
                        pointHighlightStroke: 'rgba(60,141,188,1)',
                        data                : {{ toilette }}
                    },
                ]
            }

            var stackedBarChartCanvas = $('#toilette').get(0).getContext('2d')
            var stackedBarChartData = jQuery.extend(true, {}, toilette)

            var stackedBarChartOptions = {
                responsive              : true,
                maintainAspectRatio     : false,
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true,
                        ticks: {
                            precision: 0
                        }
                    }]
                }
            }

            var stackedBarChart = new Chart(stackedBarChartCanvas, {
                type: 'bar', 
                data: stackedBarChartData,
                options: stackedBarChartOptions
            })

            //---------------------
            //- Douche -
            //---------------------
            var douche = {
                labels  : ['Haut', 'Moyen', 'Bas', 'Aucun'],
                datasets: [
                    {
                        label               : 'Douches',
                        backgroundColor     : 'rgba(60,141,188,0.9)',
                        borderColor         : 'rgba(60,141,188,0.8)',
                        pointRadius         : false,
                        pointColor          : '#3b8bba',
                        pointStrokeColor    : 'rgba(60,141,188,1)',
                        pointHighlightFill  : '#fff',
                        pointHighlightStroke: 'rgba(60,141,188,1)',
                        data                : {{ douche }}
                    },
                ]
            }

            var stackedBarChartCanvas = $('#douche').get(0).getContext('2d')
            var stackedBarChartData = jQuery.extend(true, {}, douche)

            var stackedBarChartOptions = {
                responsive              : true,
                maintainAspectRatio     : false,
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true,
                        ticks: {
                            precision: 0
                        }
                    }]
                }
            }

            var stackedBarChart = new Chart(stackedBarChartCanvas, {
                type: 'bar', 
                data: stackedBarChartData,
                options: stackedBarChartOptions
            })

            //---------------------
            //- Assainissement -
            //---------------------
            var assainissement = {
                labels  : ['Haut', 'Moyen', 'Bas', 'Aucun'],
                datasets: [
                    {
                        label               : 'Autre assainissement',
                        backgroundColor     : 'rgba(60,141,188,0.9)',
                        borderColor         : 'rgba(60,141,188,0.8)',
                        pointRadius         : false,
                        pointColor          : '#3b8bba',
                        pointStrokeColor    : 'rgba(60,141,188,1)',
                        pointHighlightFill  : '#fff',
                        pointHighlightStroke: 'rgba(60,141,188,1)',
                        data                : {{ assainissement }}
                    },
                ]
            }

            var stackedBarChartCanvas = $('#assainissement').get(0).getContext('2d')
            var stackedBarChartData = jQuery.extend(true, {}, assainissement)

            var stackedBarChartOptions = {
                responsive              : true,
                maintainAspectRatio     : false,
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true,
                        ticks: {
                            precision: 0
                        }
                    }]
                }
            }

            var stackedBarChart = new Chart(stackedBarChartCanvas, {
                type: 'bar', 
                data: stackedBarChartData,
                options: stackedBarChartOptions
            })

            //---------------------
            //- Education -
            //---------------------
            var education = {
                labels  : ['Universitaire', 'Secondaire', 'Base', 'Aucun'],
                datasets: [
                    {
                        label               : 'Education',
                        backgroundColor     : 'rgba(60,141,188,0.9)',
                        borderColor         : 'rgba(60,141,188,0.8)',
                        pointRadius         : false,
                        pointColor          : '#3b8bba',
                        pointStrokeColor    : 'rgba(60,141,188,1)',
                        pointHighlightFill  : '#fff',
                        pointHighlightStroke: 'rgba(60,141,188,1)',
                        data                : {{ education }}
                    },
                ]
            }

            var stackedBarChartCanvas = $('#education').get(0).getContext('2d')
            var stackedBarChartData = jQuery.extend(true, {}, education)

            var stackedBarChartOptions = {
                responsive              : true,
                maintainAspectRatio     : false,
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true,
                        ticks: {
                            precision: 0
                        }
                    }]
                }
            }

            var stackedBarChart = new Chart(stackedBarChartCanvas, {
                type: 'bar', 
                data: stackedBarChartData,
                options: stackedBarChartOptions
            })

            //---------------------
            //- Santé -
            //---------------------
            var sante = {
                labels  : [
                    'Traditionnelle et conventionnelle', 
                    'Conventionnelle', 
                    'Traditionnelle', 
                ],
                datasets: [
                    {
                        label               : 'Médecine',
                        backgroundColor     : 'rgba(60,141,188,0.9)',
                        borderColor         : 'rgba(60,141,188,0.8)',
                        pointRadius         : false,
                        pointColor          : '#3b8bba',
                        pointStrokeColor    : 'rgba(60,141,188,1)',
                        pointHighlightFill  : '#fff',
                        pointHighlightStroke: 'rgba(60,141,188,1)',
                        data                : {{ education }}
                    },
                ]
            }

            var stackedBarChartCanvas = $('#sante').get(0).getContext('2d')
            var stackedBarChartData = jQuery.extend(true, {}, sante)

            var stackedBarChartOptions = {
                responsive              : true,
                maintainAspectRatio     : false,
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true,
                        ticks: {
                            precision: 0
                        }
                    }]
                }
            }

            var stackedBarChart = new Chart(stackedBarChartCanvas, {
                type: 'bar', 
                data: stackedBarChartData,
                options: stackedBarChartOptions
            })
            
        })
    </script>
{% endblock %}